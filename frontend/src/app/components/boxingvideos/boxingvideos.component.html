<div class="sm:text-center aclonica-font fondo_bk overflow-auto">
  <h1 class="text-center mb-4">BO<span class="text-red-600">XEO</span></h1>

  <!-- Buscador de videos -->
  <app-searchbar [todos]="todos" (filteredItemsChanged)="onFilteredItemsChanged($event)"></app-searchbar>

  <!-- Botón para activar el modo admin -->
  <div class="flex flex-col justify-center items-center mb-4" *ngIf="role == 'admin'">
    <div
      class="border-solid border-2 w-44 bg-red-800 rounded-full hover:bg-red-900 transition duration-300 hover:scale-105 items-center "
      role="button" (click)="toggleAdminMode()">
      <img src="../../../assets/img/svg/bxl-dev-to.svg" alt="configAdmin.svg" class="w-14 mx-auto">
      <p class="text-white">MODE</p>
    </div>
  </div>


  <!-- Filter buttons -->
  <div class="grid grid-cols-2 gap-4 sm:grid-cols-5 sm:gap-4 sm:px-96 pb-20 px-10">

    <!-- Button to filter all videos -->
    <button class="bg-gray-400 text-black rounded-lg hover:bg-gray-300" [class.active]="selectedType === 'Todos'"
      (click)="filterVideos('Todos')">Todos</button>
    <!-- Button to filter videos with sack -->
    <button class="bg-gray-400 text-black rounded-lg hover:bg-gray-300" [class.active]="selectedType === 'ConSaco'"
      (click)="filterVideos('ConSaco')">Con Saco</button>

    <!-- Button to filter videos with partner -->
    <button class="bg-gray-400 text-black rounded-lg hover:bg-gray-300" [class.active]="selectedType === 'ConPareja'"
      (click)="filterVideos('ConPareja')">Con Pareja</button>

    <!-- Button to filter videos with equipment -->
    <button class="bg-gray-400 text-black rounded-lg hover:bg-gray-300"
      [class.active]="selectedType === 'ConEquipamiento'" (click)="filterVideos('ConEquipamiento')">Con
      Equipamiento</button>

    <!-- Button to filter videos without equipment -->
    <button class="bg-gray-400 text-black rounded-lg hover:bg-gray-300"
      [class.active]="selectedType === 'SinEquipamiento'" (click)="filterVideos('SinEquipamiento')">Sin
      Equipamiento</button>
  </div>

  <!-- Filtered video list -->
  <div class="grid grid-cols-1 gap-4 sm:grid-cols-3 sm:gap-12 sm:px-96 pb-20 text-center sm:text-justify">

    <!-- Individual video item -->
    <div class="group relative" *ngFor="let video of filteredItems">
      <!-- Mostrar solo si está en modo admin -->
      <div class="mb-2" *ngIf="adminModeActivated">
        <div class="flex flex-row">
          <img src="../../../assets/img/svg/bx-edit.svg" (click)="editVideo(video)" alt="bx-edit" class="w-9 mx-2"
            role="button">
          <img src="../../../assets/img/svg/bx-trash.svg" (click)="deleteVideo(video)" alt="bx-edit" class="w-9 mx-2"
            role="button">
        </div>
      </div>
      <ng-container>
        <a (click)="selectVideo(video)">

          <!-- Premium content icon -->
          <div class="premium-icon" *ngIf="video.exclusive">
            <img src="../../../assets/img/svg/star.svg" alt="Premium" class="star-icon">
          </div>

          <!-- Thumbnail of the video -->
          <div class="flex items-center justify-center sm:justify-start">
            <img src="../../../assets/img/saco.png"
              class="max-w-full sm:max-w-none transition duration-300 transform group-hover:scale-105">
          </div>

          <!-- Title of the video -->
          <h3 class="text-lg font-bold sm:mt-4">{{video.title}}</h3>
        </a>
      </ng-container>
      <!-- Modal for premium content -->
      <div [ngClass]="{'fixed inset-0 flex items-center justify-center z-50': modalOpen, 'hidden': !modalOpen}">

        <div class="absolute inset-0 bg-gray-500 opacity-10"></div>

        <div class="bg-white p-8 rounded-lg z-50">

          <!-- Error message for premium content -->
          <h2 class="text-2xl font-bold mb-4">¡Ups!
            Contenido Premium</h2>

          <p>Este video es contenido
            premium. Para acceder, actualiza tu suscripción a standard o premium.</p>

          <!-- Button to close the modal -->
          <button class="mt-4 bg-red-500 text-white px-4 py-2 rounded hover:bg-blue-600 mx-1"
            (click)="closeModal()">Volver</button>

          <!-- Button to subscribe -->
          <button class="mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-blue-600 mx-1"
            routerLink="/pricing">Subscribirse</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Edit video modal (only admin) -->
  <div
    class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-8 border border-gray-300 rounded shadow-md z-50 max-w-full"
    *ngIf="editingVideo">
    <div class="absolute inset-0 bg-gray-500 opacity-10"></div>
    <span class="absolute top-0 right-0 mr-4 mt-2 cursor-pointer" (click)="closeEditModal()">
      <svg class="h-6 w-6 text-gray-600" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        viewBox="0 0 24 24" stroke="currentColor">
        <path d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </span>

    <h2 class="text-xl font-bold mb-4">Editar Video</h2>
    <form (submit)="submitEditForm()">
      <div class="mb-4">
        <label for="title" class="block text-gray-700 text-sm font-bold mb-2">Título:</label>
        <input type="text" [(ngModel)]="editingVideo.title" name="title"
          class="w-full border border-gray-300 rounded px-3 py-2" placeholder="Título del video" required>
      </div>
      <div class="mb-4">
        <label for="coach" class="block text-gray-700 text-sm font-bold mb-2">Entrenador:</label>
        <input type="text" [(ngModel)]="editingVideo.coach" name="coach"
          class="w-full border border-gray-300 rounded px-3 py-2" placeholder="Entrenador del video" required>
      </div>
      <div class="mb-4">
        <label for="description" class="block text-gray-700 text-sm font-bold mb-2">Descripción:</label>
        <textarea [(ngModel)]="editingVideo.description" name="description"
          class="w-full border border-gray-300 rounded px-3 py-2" placeholder="Descripción del video" rows="4"
          required></textarea>
      </div>
      <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Guardar
        cambios</button>
    </form>
  </div>

</div>
